#
# Copyright (c) 2018-2019 Senscomm, Inc. All rights reserved.
#
# This is Makefile tailored for WISE
#

#
# WISE configuration
#
#WISE := wise
#CONFIG_MAIN := main_wise
#CONFIG_L2_PACKET := wise
#CONFIG_OS := wise
#CONFIG_DRIVER := bsd
#CONFIG_DRIVER := bsd

ccflags-y += -Dunix
#ccflags-y += -DOS_NO_C_LIB_DEFINES
#ccflags-y += -MMD -O2 -Wall -g
ccflags-y += -MMD -Wall -g
ccflags-y += -fmerge-all-constants
ccflags-y += -Wno-unused-but-set-variable
ccflags-y += -Wno-unused-variable
ccflags-y += -Wno-unused-function

ccflags-y += -I$(srctree)/include/freebsd
ccflags-y += -I$(srctree)/lib/
ccflags-y += -I$(srctree)/lib/lwip/src/include
ccflags-y += -I$(srctree)/lib/lwip/ports/freertos/include
ccflags-y += -I$(srctree)/lib/ifconfig
ccflags-y += -I$(srctree)/lib/net80211
ccflags-y += -I$(abspath $(src)/../include)
ifdef CONFIG_MBEDTLS_CONFIG_FILE
ccflags-y += -DMBEDTLS_CONFIG_FILE='$(CONFIG_MBEDTLS_CONFIG_FILE)'
endif

obj-y = aes.o
obj-y += aesni.o
obj-y += arc4.o
obj-y += aria.o
obj-y += asn1parse.o
obj-y += asn1write.o
obj-y += base64.o
obj-y += bignum.o
obj-y += blowfish.o
obj-y += camellia.o
obj-y += ccm.o
obj-y += chacha20.o
obj-y += chachapoly.o
obj-y += cipher.o
obj-y += cipher_wrap.o
obj-y += cmac.o
obj-y += ctr_drbg.o
obj-y += des.o
obj-y += dhm.o
obj-y += ecdh.o
obj-y += ecdsa.o
obj-y += ecjpake.o
obj-y += ecp.o
obj-y += ecp_curves.o
obj-y += entropy.o
obj-y += entropy_poll.o
obj-y += entropy_scm2010.o
obj-y += error.o
obj-y += gcm.o
obj-y += havege.o
obj-y += hkdf.o
obj-y += hmac_drbg.o
obj-y += md.o
obj-y += md2.o
obj-y += md4.o
obj-y += md5.o
#obj-y += md_wrap.o
obj-y += memory_buffer_alloc.o
obj-y += nist_kw.o
obj-y += oid.o
obj-y += padlock.o
obj-y += pem.o
obj-y += pk.o
obj-y += pk_wrap.o
obj-y += pkcs12.o
obj-y += pkcs5.o
obj-y += pkparse.o
obj-y += pkwrite.o
obj-y += platform.o
obj-y += platform_util.o
obj-y += poly1305.o
obj-y += ripemd160.o
obj-y += rsa_internal.o
obj-y += rsa.o
obj-y += sha1.o
obj-y += sha256.o
obj-y += sha512.o
obj-y += threading.o
obj-y += timing.o
obj-y += version.o
obj-y += version_features.o
obj-y += xtea.o


obj-y += certs.o
obj-y += pkcs11.o
obj-y += x509.o
obj-y += x509_create.o
obj-y += x509_crl.o
obj-y += x509_crt.o
obj-y += x509_csr.o
obj-y += x509write_crt.o
obj-y += x509write_csr.o


obj-y += debug.o
obj-y += net_sockets.o
obj-y += ssl_cache.o
obj-y += ssl_ciphersuites.o
obj-y += ssl_cli.o
obj-y += ssl_cookie.o
obj-y += ssl_srv.o
obj-y += ssl_ticket.o
obj-y += ssl_tls.o
obj-y += ssl_msg.o
obj-y += entropy_scm2010.o
obj-y += constant_time.o

//obj-y += ../programs/ssl/ssl_client1.o
//obj-y += ../programs/ssl/ssl_server.o

# WISE port
obj-$(CONFIG_MBEDTLS_NET_C_PORT) += port/net_sockets.o
